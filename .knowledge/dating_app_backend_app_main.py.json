{"is_source_file": true, "format": "Python", "description": "Main FastAPI backend application for the Preference Dating App, defining data models, route handlers, WebSocket communication, and configuration settings.", "external_files": [".env", "sqlalchemy", "pydantic", "fastapi", "fastapi.middleware.cors", "sqlalchemy.orm", "pydantic_settings"], "external_methods": ["db.query()", "db.add()", "db.commit()", "db.refresh()", "db.close()", "Depends()", "Field()", "create_engine()", "sessionmaker()", "BaseModel", "BaseSettings", "datetime.utcnow", "FastAPI()", "HTTPException", "WebSocket", "WebSocketDisconnect", "Query"], "published": ["app", "Settings", "authenticate_user", "get_db", "WsHub"], "classes": [{"name": "Settings", "description": "Application configuration loaded from environment variables or .env file."}, {"name": "AuthUser", "description": "SQLAlchemy model representing the authentication user."}, {"name": "Profile", "description": "SQLAlchemy model representing user profiles."}, {"name": "Match", "description": "SQLAlchemy model representing match relationships."}, {"name": "Message", "description": "SQLAlchemy model representing chat messages."}, {"name": "FilterPreset", "description": "SQLAlchemy model for filter preset configurations."}, {"name": "AuthRequest", "description": "Pydantic model for authentication request payload."}, {"name": "AuthResponse", "description": "Pydantic model for authentication response payload."}, {"name": "ProfileCreate", "description": "Pydantic model for profile creation."}, {"name": "ProfileUpdate", "description": "Pydantic model for updating profiles."}, {"name": "ProfileOut", "description": "Output Pydantic model for profile data."}, {"name": "SwipeRequest", "description": "Pydantic model for swipe actions."}, {"name": "MatchOut", "description": "Pydantic model for match data."}, {"name": "MessageCreate", "description": "Pydantic model for creating chat messages."}, {"name": "MessageOut", "description": "Pydantic model for chat message output."}, {"name": "FilterSettings", "description": "Pydantic model for filter configuration."}, {"name": "FilterPresetCreate", "description": "Pydantic model for creating filter presets."}, {"name": "WsHub", "description": "In-memory WebSocket hub for managing chat connections per match."}], "methods": [{"name": "get_db()", "description": "Dependency that provides a SQLAlchemy session.", "scope": "", "scopeKind": ""}, {"name": "login(payload: AuthRequest, db: Session = Depends(get_db))", "description": "Mock login endpoint that creates or retrieves a user and returns a token.", "scope": "", "scopeKind": ""}, {"name": "create_profile(p: ProfileCreate, db: Session = Depends(get_db))", "description": "Creates a new user profile.", "scope": "", "scopeKind": ""}, {"name": "get_profile(user_id: int, db: Session = Depends(get_db))", "description": "Retrieves a profile by user ID.", "scope": "", "scopeKind": ""}, {"name": "update_profile", "description": "Updates an existing profile."}, {"name": "discover_profiles( min_height_cm: Optional[int] = Query(None), max_height_cm: Optional[int] = Query(None), min_weight_kg: Optional[int] = Query(None), max_weight_kg: Optional[int] = Query(None), genders: Optional[str] = Query(None, description=\"Comma-separated list, e.g., male,female,nonbinary\"), limit: int = Query(20, ge=1, le=100), db: Session = Depends(get_db) )", "description": "Returns profiles filtered by optional criteria.", "scope": "", "scopeKind": ""}, {"name": "swipe", "description": "Records a swipe; creates a match if mutual right-swipe."}, {"name": "list_matches(user_id: int, db: Session = Depends(get_db))", "description": "Returns a list of all matches involving a user.", "scope": "", "scopeKind": ""}, {"name": "list_messages(match_id: int, db: Session = Depends(get_db))", "description": "Lists messages for a specific match.", "scope": "", "scopeKind": ""}, {"name": "send_message", "description": "Saves a new message and broadcasts it via WebSocket."}, {"name": "list_filter_presets(db: Session = Depends(get_db))", "description": "Lists existing filter presets.", "scope": "", "scopeKind": ""}, {"name": "create_filter_preset(preset: FilterPresetCreate, db: Session = Depends(get_db))", "description": "Creates a new filter preset.", "scope": "", "scopeKind": ""}, {"name": "ws_chat", "description": "WebSocket endpoint for real-time chat, manages connection and message broadcasting."}, {"name": "websocket_docs", "description": "Provides information on how to connect to WebSocket chat."}, {"name": "str _build_db_url()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "broadcast_to_match(cls, match_id: str, payload: dict)", "scope": "WsHub", "scopeKind": "class", "description": "unavailable"}], "calls": ["db.query()", "db.add()", "db.commit()", "db.refresh()", "db.close()", "WsHub.broadcast_to_match()", "ws.send_json()", "ws.receive_json()"], "search-terms": ["FastAPI", "preferences", "dating", "profiles", "match", "swipe", "messages", "websocket", "WebSocket", "filter", "preset", "channels", "match_id"], "state": 2, "file_id": 16, "knowledge_revision": 43, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_PORT", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    API_PORT: int = 8000$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "AuthRequest", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class AuthRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AuthResponse", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class AuthResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AuthUser", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class AuthUser(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    DATABASE_URL: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^DATABASE_URL = _build_db_url()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "FRONTEND_URL", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    FRONTEND_URL: str = \"http:\\/\\/localhost:5173\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "FilterPreset", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class FilterPreset(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FilterPresetCreate", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class FilterPresetCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FilterSettings", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class FilterSettings(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Match", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class Match(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MatchOut", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class MatchOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Message", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class Message(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MessageCreate", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class MessageCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MessageOut", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class MessageOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PGDATABASE", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    PGDATABASE: str = \"myapp\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "PGHOST", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    PGHOST: str = \"localhost\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "PGPASSWORD", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    PGPASSWORD: str = \"dbuser123\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "PGPORT", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    PGPORT: int = 5001$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "PGUSER", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    PGUSER: str = \"appuser\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "POSTGRES_URL", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    POSTGRES_URL: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "Profile", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class Profile(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProfileCreate", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class ProfileCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProfileOut", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class ProfileOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProfileUpdate", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class ProfileUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^SessionLocal = sessionmaker(bind=engine, autoflush=False, autocommit=False, future=True)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Settings", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class Settings(BaseSettings):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SwipeRequest", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class SwipeRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WsHub", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^class WsHub:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "Match", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "Message", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    __tablename__ = \"auth_user\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "AuthUser", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    __tablename__ = \"core_filterpreset\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "FilterPreset", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    __tablename__ = \"core_match\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Match", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    __tablename__ = \"core_message\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Message", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    __tablename__ = \"core_profile\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "_build_db_url", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def _build_db_url() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "bio", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    bio: Mapped[str] = mapped_column(Text)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "bio", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    bio: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "broadcast_to_match", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    def broadcast_to_match(cls, match_id: str, payload: dict):$/", "language": "Python", "kind": "member", "signature": "(cls, match_id: str, payload: dict)", "scope": "WsHub", "scopeKind": "class"}, {"_type": "tag", "name": "channels", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    channels = {}  # match_id -> set of WebSocket$/", "language": "Python", "kind": "variable", "scope": "WsHub", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    content: Mapped[str] = mapped_column(Text)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Message", "scopeKind": "class"}, {"_type": "tag", "name": "create_filter_preset", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def create_filter_preset(preset: FilterPresetCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(preset: FilterPresetCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "create_profile", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def create_profile(p: ProfileCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(p: ProfileCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), default=datetime.utcno/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "FilterPreset", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), default=datetime.utcno/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Match", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), default=datetime.utcno/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Message", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), default=datetime.utcno/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "date_joined", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    date_joined: Mapped[datetime] = mapped_column(DateTime(timezone=True), default=datetime.utcn/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "AuthUser", "scopeKind": "class"}, {"_type": "tag", "name": "direction", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    direction: str = Field(..., description=\"'right' or 'left'\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SwipeRequest", "scopeKind": "class"}, {"_type": "tag", "name": "discover_profiles", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def discover_profiles($/", "language": "Python", "kind": "function", "signature": "( min_height_cm: Optional[int] = Query(None), max_height_cm: Optional[int] = Query(None), min_weight_kg: Optional[int] = Query(None), max_weight_kg: Optional[int] = Query(None), genders: Optional[str] = Query(None, description=\"Comma-separated list, e.g., male,female,nonbinary\"), limit: int = Query(20, ge=1, le=100), db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    display_name: Mapped[str] = mapped_column(String(100))$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    display_name: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    email: Mapped[str] = mapped_column(String(254))$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "AuthUser", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    email: str = Field(..., description=\"Email for mock sign-in\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AuthRequest", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^engine = create_engine(DATABASE_URL, pool_pre_ping=True, future=True)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "env_file", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^        env_file = \".env\"$/", "language": "Python", "kind": "variable", "scope": "Settings.Config", "scopeKind": "class"}, {"_type": "tag", "name": "env_file_encoding", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^        env_file_encoding = \"utf-8\"$/", "language": "Python", "kind": "variable", "scope": "Settings.Config", "scopeKind": "class"}, {"_type": "tag", "name": "gender", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    gender: Mapped[str] = mapped_column(String(32))$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "gender", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    gender: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "genders", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    genders: List[str] = Field(default_factory=list)$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "FilterPresetCreate", "scopeKind": "class"}, {"_type": "tag", "name": "genders", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    genders: List[str] = Field(default_factory=list)$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "FilterSettings", "scopeKind": "class"}, {"_type": "tag", "name": "genders", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    genders: Mapped[list] = mapped_column(JSON, default=list)$/", "language": "Python", "typeref": "typename:Mapped[list]", "kind": "variable", "scope": "FilterPreset", "scopeKind": "class"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def get_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_profile", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def get_profile(user_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(user_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "height_cm", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    height_cm: Mapped[Optional[int]] = mapped_column(Integer, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[int]]", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "height_cm", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    height_cm: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "ProfileCreate", "scopeKind": "class"}, {"_type": "tag", "name": "height_cm", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    height_cm: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    id: Mapped[int] = mapped_column(BigInteger, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "FilterPreset", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    id: Mapped[int] = mapped_column(BigInteger, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Match", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    id: Mapped[int] = mapped_column(BigInteger, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Message", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    id: Mapped[int] = mapped_column(BigInteger, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "AuthUser", "scopeKind": "class"}, {"_type": "tag", "name": "interests", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    interests: List[str] = Field(default_factory=list)$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "ProfileCreate", "scopeKind": "class"}, {"_type": "tag", "name": "interests", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    interests: Mapped[dict] = mapped_column(JSON)$/", "language": "Python", "typeref": "typename:Mapped[dict]", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "interests", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    interests: Optional[List[str]] = None$/", "language": "Python", "typeref": "typename:Optional[List[str]]", "kind": "variable", "scope": "ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    is_active: Mapped[bool] = mapped_column(Boolean, default=True)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "AuthUser", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    is_active: Mapped[bool] = mapped_column(Boolean, default=True)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "Match", "scopeKind": "class"}, {"_type": "tag", "name": "is_public", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    is_public: Mapped[bool] = mapped_column(Boolean, default=True)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "FilterPreset", "scopeKind": "class"}, {"_type": "tag", "name": "is_public", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    is_public: bool = True$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "FilterPresetCreate", "scopeKind": "class"}, {"_type": "tag", "name": "is_read", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    is_read: Mapped[bool] = mapped_column(Boolean, default=False)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "Message", "scopeKind": "class"}, {"_type": "tag", "name": "list_filter_presets", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def list_filter_presets(db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(db: Session = Depends(get_db))"}, {"_type": "tag", "name": "list_matches", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def list_matches(user_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(user_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "list_messages", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def list_messages(match_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(match_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^def login(payload: AuthRequest, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: AuthRequest, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "match_id", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    match_id: Mapped[int] = mapped_column(BigInteger, ForeignKey(\"core_match.id\"))$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Message", "scopeKind": "class"}, {"_type": "tag", "name": "matched_at", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    matched_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), default=datetime.utcno/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Match", "scopeKind": "class"}, {"_type": "tag", "name": "max_height_cm", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    max_height_cm: Mapped[Optional[int]] = mapped_column(Integer, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[int]]", "kind": "variable", "scope": "FilterPreset", "scopeKind": "class"}, {"_type": "tag", "name": "max_height_cm", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    max_height_cm: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "FilterPresetCreate", "scopeKind": "class"}, {"_type": "tag", "name": "max_height_cm", "path": "/home/kavia/workspace/code-generation/preference-dating-app-183584-184324/dating_app_backend/app/main.py", "pattern": "/^    max_height_cm: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "FilterSettings", "scopeKind": "class"}], "hash": "8ce28fed6c039ea2e42e711ca63235ed", "format-version": 4, "code-base-name": "dating_app_database", "filename": "dating_app_backend/app/main.py", "fields": [{"name": "int API_PORT", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] DATABASE_URL", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "DATABASE_URL = _build_db_url()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str FRONTEND_URL", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "str PGDATABASE", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "str PGHOST", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "str PGPASSWORD", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "int PGPORT", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "str PGUSER", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] POSTGRES_URL", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(bind=engine, autoflush=False, autocommit=False, future=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__table_args__ = (", "scope": "Match", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"auth_user\"", "scope": "AuthUser", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"core_filterpreset\"", "scope": "FilterPreset", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"core_match\"", "scope": "Match", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"core_message\"", "scope": "Message", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"core_profile\"", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Mapped[str] bio", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] bio", "scope": "ProfileUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "channels = {}  # match_id -> set of WebSocket", "scope": "WsHub", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] content", "scope": "Message", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] created_at", "scope": "FilterPreset", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] date_joined", "scope": "AuthUser", "scopeKind": "class", "description": "unavailable"}, {"name": "str direction", "scope": "SwipeRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] display_name", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] display_name", "scope": "ProfileUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] email", "scope": "AuthUser", "scopeKind": "class", "description": "unavailable"}, {"name": "str email", "scope": "AuthRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(DATABASE_URL, pool_pre_ping=True, future=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "env_file = \".env\"", "scope": "Settings.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "env_file_encoding = \"utf-8\"", "scope": "Settings.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] gender", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] gender", "scope": "ProfileUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] genders", "scope": "FilterPresetCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[list] genders", "scope": "FilterPreset", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[int]] height_cm", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] height_cm", "scope": "ProfileCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] id", "scope": "FilterPreset", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] interests", "scope": "ProfileCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[dict] interests", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[List[str]] interests", "scope": "ProfileUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] is_active", "scope": "AuthUser", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] is_public", "scope": "FilterPreset", "scopeKind": "class", "description": "unavailable"}, {"name": "bool is_public", "scope": "FilterPresetCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] is_read", "scope": "Message", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] match_id", "scope": "Message", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] matched_at", "scope": "Match", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[int]] max_height_cm", "scope": "FilterPreset", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] max_height_cm", "scope": "FilterPresetCreate", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"43": ""}]}